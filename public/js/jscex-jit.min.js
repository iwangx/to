!function(){var codeGenerator="function"==typeof eval("(function () {})")?function(code){return code}:function(code){return"false || "+code},stringify="undefined"!=typeof JSON&&JSON.stringify?function(s){return JSON.stringify(s)}:function(){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(s){return escapable.lastIndex=0,escapable.test(s)?'"'+s.replace(escapable,function(a){var c=meta[a];return"s"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+s+'"'}}();"undefined"==typeof __jscex__tempVarSeed&&(__jscex__tempVarSeed=0);var init=function(root){function JscexTreeGenerator(binder){this._binder=binder,this._root=null}function CodeGenerator(builderName,binder,indent){this._builderName=builderName,this._binder=binder,this._normalMode=!1,this._indent=indent,this._indentLevel=0,this._builderVar="$$_builder_$$_"+__jscex__tempVarSeed++}function _isJscexPattern(ast){if("call"!=ast[0])return!1;var evalName=ast[1];if("name"!=evalName[0]||"eval"!=evalName[1])return!1;var compileCall=ast[2][0];if(!compileCall||"call"!=compileCall[0])return!1;var compileMethod=compileCall[1];if(!compileMethod||"dot"!=compileMethod[0]||"compile"!=compileMethod[2])return!1;var jscexName=compileMethod[1];if(!jscexName||"name"!=jscexName[0]||"Jscex"!=jscexName[1])return!1;var builder=compileCall[2][0];if(!builder||"string"!=builder[0])return!1;var func=compileCall[2][1];return func&&"function"==func[0]?!0:!1}function _compileJscexPattern(ast,indent){var builderName=ast[2][0][2][0][1],funcAst=ast[2][0][2][1],binder=root.binders[builderName],jscexTreeGenerator=new JscexTreeGenerator(binder),jscexAst=jscexTreeGenerator.generate(funcAst),codeGenerator=new CodeGenerator(builderName,binder,indent),newCode=codeGenerator.generate(funcAst[2],jscexAst);return newCode}function compile(builderName,func){var funcCode=func.toString(),evalCode="eval(Jscex.compile("+stringify(builderName)+", "+funcCode+"))",evalCodeAst=root.parse(evalCode),evalAst=evalCodeAst[1][0][1],newCode=_compileJscexPattern(evalAst,0);return root.logger.debug(funcCode+"\n\n>>>\n\n"+newCode),codeGenerator(newCode)}root.modules.jit||(JscexTreeGenerator.prototype={generate:function(ast){var statements=(ast[2],ast[3]);return this._root={type:"delay",stmts:[]},this._visitStatements(statements,this._root.stmts),this._root},_getBindInfo:function(stmt){var type=stmt[0];if("stat"==type){var expr=stmt[1];if("call"==expr[0]){var callee=expr[1];if("name"==callee[0]&&callee[1]==this._binder&&1==expr[2].length)return{expression:expr[2][0],argName:"",assignee:null}}else if("assign"==expr[0]){var assignee=expr[2];if(expr=expr[3],"call"==expr[0]){var callee=expr[1];if("name"==callee[0]&&callee[1]==this._binder&&1==expr[2].length)return{expression:expr[2][0],argName:"$$_result_$$",assignee:assignee}}}}else if("var"==type){var defs=stmt[1];if(1==defs.length){var item=defs[0],name=item[0],expr=item[1];if(expr&&"call"==expr[0]){var callee=expr[1];if("name"==callee[0]&&callee[1]==this._binder&&1==expr[2].length)return{expression:expr[2][0],argName:name,assignee:null}}}}else if("return"==type){var expr=stmt[1];if(expr&&"call"==expr[0]){var callee=expr[1];if("name"==callee[0]&&callee[1]==this._binder&&1==expr[2].length)return{expression:expr[2][0],argName:"$$_result_$$",assignee:"return"}}}return null},_visitStatements:function(statements,stmts,index){if(arguments.length<=2&&(index=0),index>=statements.length)return stmts.push({type:"normal"}),this;var currStmt=statements[index],bindInfo=this._getBindInfo(currStmt);if(bindInfo){var bindStmt={type:"bind",info:bindInfo};stmts.push(bindStmt),"return"!=bindInfo.assignee&&(bindStmt.stmts=[],this._visitStatements(statements,bindStmt.stmts,index+1))}else{var type=currStmt[0];if("return"==type||"break"==type||"continue"==type||"throw"==type)stmts.push({type:type,stmt:currStmt});else if("if"==type||"try"==type||"for"==type||"do"==type||"while"==type||"switch"==type||"for-in"==type){var newStmt=this._visit(currStmt);if("raw"==newStmt.type)stmts.push(newStmt),this._visitStatements(statements,stmts,index+1);else{var isLast=index==statements.length-1;if(isLast)stmts.push(newStmt);else{var combineStmt={type:"combine",first:{type:"delay",stmts:[newStmt]},second:{type:"delay",stmts:[]}};stmts.push(combineStmt),this._visitStatements(statements,combineStmt.second.stmts,index+1)}}}else stmts.push({type:"raw",stmt:currStmt}),this._visitStatements(statements,stmts,index+1)}return this},_visit:function(ast){function throwUnsupportedError(){throw new Error('"'+type+'" is not currently supported.')}var type=ast[0],visitor=this._visitors[type];return visitor?visitor.call(this,ast):void throwUnsupportedError()},_visitBody:function(ast,stmts){"block"==ast[0]?this._visitStatements(ast[1],stmts):this._visitStatements([ast],stmts)},_noBinding:function(stmts){switch(stmts[stmts.length-1].type){case"normal":case"return":case"break":case"throw":case"continue":return!0}return!1},_collectCaseStatements:function(cases,index){for(var res=[],i=index;i<cases.length;i++)for(var rawStmts=cases[i][1],j=0;j<rawStmts.length;j++){if("break"==rawStmts[j][0])return res;res.push(rawStmts[j])}return res},_visitors:{"for":function(ast){var bodyStmts=[],body=ast[4];if(this._visitBody(body,bodyStmts),this._noBinding(bodyStmts))return{type:"raw",stmt:ast};var delayStmt={type:"delay",stmts:[]},setup=ast[1];setup&&delayStmt.stmts.push({type:"raw",stmt:setup});var loopStmt={type:"loop",bodyFirst:!1,bodyStmt:{type:"delay",stmts:bodyStmts}};delayStmt.stmts.push(loopStmt);var condition=ast[2];condition&&(loopStmt.condition=condition);var update=ast[3];return update&&(loopStmt.update=update),delayStmt},"for-in":function(ast){var body=ast[4],bodyStmts=[];if(this._visitBody(body,bodyStmts),this._noBinding(bodyStmts))return{type:"raw",stmt:ast};var id=__jscex__tempVarSeed++,keysVar="$$_keys_$$_"+id,indexVar="$$_index_$$_"+id,delayStmt={type:"delay",stmts:[]},keysAst=root.parse("var "+keysVar+" = Jscex._forInKeys(obj);")[1][0];keysAst[1][0][1][2][0]=ast[3],delayStmt.stmts.push({type:"raw",stmt:keysAst}),delayStmt.stmts.push({type:"raw",stmt:root.parse("var "+indexVar+" = 0;")[1][0]});var condition=root.parse(indexVar+" < "+keysVar+".length")[1][0][1],update=root.parse(indexVar+"++")[1][0][1],loopStmt={type:"loop",bodyFirst:!1,update:update,condition:condition,bodyStmt:{type:"delay",stmts:[]}};delayStmt.stmts.push(loopStmt);var varName=ast[2][1];return"var"==ast[1][0]?loopStmt.bodyStmt.stmts.push({type:"raw",stmt:root.parse("var "+varName+" = "+keysVar+"["+indexVar+"];")[1][0]}):loopStmt.bodyStmt.stmts.push({type:"raw",stmt:root.parse(varName+" = "+keysVar+"["+indexVar+"];")[1][0]}),this._visitBody(body,loopStmt.bodyStmt.stmts),delayStmt},"while":function(ast){var bodyStmts=[],body=ast[2];if(this._visitBody(body,bodyStmts),this._noBinding(bodyStmts))return{type:"raw",stmt:ast};var loopStmt={type:"loop",bodyFirst:!1,bodyStmt:{type:"delay",stmts:bodyStmts}},condition=ast[1];return loopStmt.condition=condition,loopStmt},"do":function(ast){var bodyStmts=[],body=ast[2];if(this._visitBody(body,bodyStmts),this._noBinding(bodyStmts))return{type:"raw",stmt:ast};var loopStmt={type:"loop",bodyFirst:!0,bodyStmt:{type:"delay",stmts:bodyStmts}},condition=ast[1];return loopStmt.condition=condition,loopStmt},"switch":function(ast){for(var noBinding=!0,switchStmt={type:"switch",item:ast[1],caseStmts:[]},cases=ast[2],i=0;i<cases.length;i++){var caseStmt={item:cases[i][0],stmts:[]};switchStmt.caseStmts.push(caseStmt);var statements=this._collectCaseStatements(cases,i);this._visitStatements(statements,caseStmt.stmts),noBinding=noBinding&&this._noBinding(caseStmt.stmts)}return noBinding?{type:"raw",stmt:ast}:switchStmt},"if":function(ast){for(var noBinding=!0,ifStmt={type:"if",conditionStmts:[]},currAst=ast;;){var condition=currAst[1],condStmt={cond:condition,stmts:[]};ifStmt.conditionStmts.push(condStmt);var thenPart=currAst[2];this._visitBody(thenPart,condStmt.stmts),noBinding=noBinding&&this._noBinding(condStmt.stmts);var elsePart=currAst[3];if(!elsePart||"if"!=elsePart[0])break;currAst=elsePart}var elsePart=currAst[3];return elsePart&&(ifStmt.elseStmts=[],this._visitBody(elsePart,ifStmt.elseStmts),noBinding=noBinding&&this._noBinding(ifStmt.elseStmts)),noBinding?{type:"raw",stmt:ast}:ifStmt},"try":function(ast,stmts){var bodyStmts=[],bodyStatements=ast[1];this._visitStatements(bodyStatements,bodyStmts);var noBinding=this._noBinding(bodyStmts),tryStmt={type:"try",bodyStmt:{type:"delay",stmts:bodyStmts}},catchClause=ast[2];if(catchClause){var exVar=catchClause[0];tryStmt.exVar=exVar,tryStmt.catchStmts=[],this._visitStatements(catchClause[1],tryStmt.catchStmts),noBinding=noBinding&&this._noBinding(tryStmt.catchStmts)}var finallyStatements=ast[3];return finallyStatements&&(tryStmt.finallyStmt={type:"delay",stmts:[]},this._visitStatements(finallyStatements,tryStmt.finallyStmt.stmts),noBinding=noBinding&&this._noBinding(tryStmt.finallyStmt.stmts)),noBinding?{type:"raw",stmt:ast}:tryStmt}}},CodeGenerator.prototype={_write:function(s){return this._buffer.push(s),this},_writeLine:function(s){return this._write(s)._write("\n"),this},_writeIndents:function(){for(var i=0;i<this._indent;i++)this._write(" ");for(var i=0;i<this._indentLevel;i++)this._write("    ");return this},generate:function(params,jscexAst){return this._buffer=[],this._writeLine("(function ("+params.join(", ")+") {"),this._indentLevel++,this._writeIndents()._writeLine("var "+this._builderVar+" = Jscex.builders["+stringify(this._builderName)+"];"),this._writeIndents()._writeLine("return "+this._builderVar+".Start(this,"),this._indentLevel++,this._pos={},this._writeIndents()._visitJscex(jscexAst)._writeLine(),this._indentLevel--,this._writeIndents()._writeLine(");"),this._indentLevel--,this._writeIndents()._write("})"),this._buffer.join("")},_visitJscex:function(ast){return this._jscexVisitors[ast.type].call(this,ast),this},_visitRaw:function(ast){function throwUnsupportedError(){throw new Error('"'+type+'" is not currently supported.')}var type=ast[0],visitor=this._rawVisitors[type];return visitor?visitor.call(this,ast):throwUnsupportedError(),this},_visitJscexStatements:function(statements){for(var i=0;i<statements.length;i++){var stmt=statements[i];"raw"==stmt.type||"if"==stmt.type||"switch"==stmt.type?this._writeIndents()._visitJscex(stmt)._writeLine():"delay"==stmt.type?this._visitJscexStatements(stmt.stmts):this._writeIndents()._write("return ")._visitJscex(stmt)._writeLine(";")}},_visitRawStatements:function(statements){for(var i=0;i<statements.length;i++){var s=statements[i];switch(this._writeIndents()._visitRaw(s)._writeLine(),s[0]){case"break":case"return":case"continue":case"throw":return}}},_visitRawBody:function(body){return"block"==body[0]?this._visitRaw(body):(this._writeLine(),this._indentLevel++,this._writeIndents()._visitRaw(body),this._indentLevel--),this},_visitRawFunction:function(ast){var funcName=ast[1]||"",args=ast[2],statements=ast[3];this._writeLine("function "+funcName+"("+args.join(", ")+") {"),this._indentLevel++;var currInFunction=this._pos.inFunction;this._pos.inFunction=!0,this._visitRawStatements(statements),this._indentLevel--,this._pos.inFunction=currInFunction,this._writeIndents()._write("}")},_jscexVisitors:{delay:function(ast){if(1==ast.stmts.length){var subStmt=ast.stmts[0];switch(subStmt.type){case"delay":case"combine":case"normal":case"break":case"continue":case"loop":case"try":return void this._visitJscex(subStmt);case"return":if(!subStmt.stmt[1])return void this._visitJscex(subStmt)}}this._writeLine(this._builderVar+".Delay(function () {"),this._indentLevel++,this._visitJscexStatements(ast.stmts),this._indentLevel--,this._writeIndents()._write("})")},combine:function(ast){this._writeLine(this._builderVar+".Combine("),this._indentLevel++,this._writeIndents()._visitJscex(ast.first)._writeLine(","),this._writeIndents()._visitJscex(ast.second)._writeLine(),this._indentLevel--,this._writeIndents()._write(")")},loop:function(ast){this._writeLine(this._builderVar+".Loop("),this._indentLevel++,ast.condition?(this._writeIndents()._writeLine("function () {"),this._indentLevel++,this._writeIndents()._write("return ")._visitRaw(ast.condition)._writeLine(";"),this._indentLevel--,this._writeIndents()._writeLine("},")):this._writeIndents()._writeLine("null,"),ast.update?(this._writeIndents()._writeLine("function () {"),this._indentLevel++,this._writeIndents()._visitRaw(ast.update)._writeLine(";"),this._indentLevel--,this._writeIndents()._writeLine("},")):this._writeIndents()._writeLine("null,"),this._writeIndents()._visitJscex(ast.bodyStmt)._writeLine(","),this._writeIndents()._writeLine(ast.bodyFirst),this._indentLevel--,this._writeIndents()._write(")")},raw:function(ast){this._visitRaw(ast.stmt)},bind:function(ast){var info=ast.info;this._write(this._builderVar+".Bind(")._visitRaw(info.expression)._writeLine(", function ("+info.argName+") {"),this._indentLevel++,"return"==info.assignee?this._writeIndents()._writeLine("return "+this._builderVar+".Return("+info.argName+");"):(info.assignee&&this._writeIndents()._visitRaw(info.assignee)._writeLine(" = "+info.argName+";"),this._visitJscexStatements(ast.stmts)),this._indentLevel--,this._writeIndents()._write("})")},"if":function(ast){for(var i=0;i<ast.conditionStmts.length;i++){var stmt=ast.conditionStmts[i];this._write("if (")._visitRaw(stmt.cond)._writeLine(") {"),this._indentLevel++,this._visitJscexStatements(stmt.stmts),this._indentLevel--,this._writeIndents()._write("} else ")}this._writeLine("{"),this._indentLevel++,ast.elseStmts?this._visitJscexStatements(ast.elseStmts):this._writeIndents()._writeLine("return "+this._builderVar+".Normal();"),this._indentLevel--,this._writeIndents()._write("}")},"switch":function(ast){this._write("switch (")._visitRaw(ast.item)._writeLine(") {"),this._indentLevel++;for(var i=0;i<ast.caseStmts.length;i++){var caseStmt=ast.caseStmts[i];caseStmt.item?this._writeIndents()._write("case ")._visitRaw(caseStmt.item)._writeLine(":"):this._writeIndents()._writeLine("default:"),this._indentLevel++,this._visitJscexStatements(caseStmt.stmts),this._indentLevel--}this._writeIndents()._write("}")},"try":function(ast){this._writeLine(this._builderVar+".Try("),this._indentLevel++,this._writeIndents()._visitJscex(ast.bodyStmt)._writeLine(","),ast.catchStmts?(this._writeIndents()._writeLine("function ("+ast.exVar+") {"),this._indentLevel++,this._visitJscexStatements(ast.catchStmts),this._indentLevel--,this._writeIndents()._writeLine("},")):this._writeIndents()._writeLine("null,"),ast.finallyStmt?this._writeIndents()._visitJscex(ast.finallyStmt)._writeLine():this._writeIndents()._writeLine("null"),this._indentLevel--,this._writeIndents()._write(")")},normal:function(ast){this._write(this._builderVar+".Normal()")},"throw":function(ast){this._write(this._builderVar+".Throw(")._visitRaw(ast.stmt[1])._write(")")},"break":function(ast){this._write(this._builderVar+".Break()")},"continue":function(ast){this._write(this._builderVar+".Continue()")},"return":function(ast){this._write(this._builderVar+".Return("),ast.stmt[1]&&this._visitRaw(ast.stmt[1]),this._write(")")}},_rawVisitors:{"var":function(ast){this._write("var ");for(var items=ast[1],i=0;i<items.length;i++)this._write(items[i][0]),items[i].length>1&&this._write(" = ")._visitRaw(items[i][1]),i<items.length-1&&this._write(", ");this._write(";")},seq:function(ast){for(var i=1;i<ast.length;i++)this._visitRaw(ast[i]),i<ast.length-1&&this._write(", ")},binary:function(ast){function needBracket(item){var type=item[0];return!("num"==type||"name"==type||"dot"==type)}var op=ast[1],left=ast[2],right=ast[3];needBracket(left)?this._write("(")._visitRaw(left)._write(") "):this._visitRaw(left)._write(" "),this._write(op),needBracket(right)?this._write(" (")._visitRaw(right)._write(")"):this._write(" ")._visitRaw(right)},sub:function(ast){function needBracket(){return!("name"==prop[0])}var prop=ast[1],index=ast[2];needBracket()?this._write("(")._visitRaw(prop)._write(")[")._visitRaw(index)._write("]"):this._visitRaw(prop)._write("[")._visitRaw(index)._write("]")},"unary-postfix":function(ast){var op=ast[1],item=ast[2];this._visitRaw(item)._write(op)},"unary-prefix":function(ast){var op=ast[1],item=ast[2];this._write(op),"typeof"==op?this._write("(")._visitRaw(item)._write(")"):this._visitRaw(item)},assign:function(ast){var op=ast[1],name=ast[2],value=ast[3];this._visitRaw(name),"string"==typeof op?this._write(" "+op+"= "):this._write(" = "),this._visitRaw(value)},stat:function(ast){this._visitRaw(ast[1])._write(";")},dot:function(ast){function needBracket(){var leftOp=ast[1][0];return!("dot"==leftOp||"name"==leftOp)}needBracket()?this._write("(")._visitRaw(ast[1])._write(").")._write(ast[2]):this._visitRaw(ast[1])._write(".")._write(ast[2])},"new":function(ast){var ctor=ast[1];this._write("new ")._visitRaw(ctor)._write("(");for(var args=ast[2],i=0,len=args.length;len>i;i++)this._visitRaw(args[i]),len-1>i&&this._write(", ");this._write(")")},call:function(ast){if(_isJscexPattern(ast)){var indent=this._indent+4*this._indentLevel,newCode=_compileJscexPattern(ast,indent);this._write(newCode)}else{var invalidBind="name"==ast[1][0]&&ast[1][1]==this._binder;invalidBind&&(this._pos={inFunction:!0},this._buffer=[]),this._visitRaw(ast[1])._write("(");for(var args=ast[2],i=0;i<args.length;i++)this._visitRaw(args[i]),i<args.length-1&&this._write(", ");if(this._write(")"),invalidBind)throw"Invalid bind operation: "+this._buffer.join("")}},name:function(ast){this._write(ast[1])},object:function(ast){var items=ast[1];if(items.length<=0)this._write("{ }");else{this._writeLine("{"),this._indentLevel++;for(var i=0;i<items.length;i++)this._writeIndents()._write(stringify(items[i][0])+": ")._visitRaw(items[i][1]),i<items.length-1?this._writeLine(","):this._writeLine("");this._indentLevel--,this._writeIndents()._write("}")}},array:function(ast){this._write("[");for(var items=ast[1],i=0;i<items.length;i++)this._visitRaw(items[i]),i<items.length-1&&this._write(", ");this._write("]")},num:function(ast){this._write(ast[1])},regexp:function(ast){this._write("/"+ast[1]+"/"+ast[2])},string:function(ast){this._write(stringify(ast[1]))},"function":function(ast){this._visitRawFunction(ast)},defun:function(ast){this._visitRawFunction(ast)},"return":function(ast){if(this._pos.inFunction){this._write("return");var value=ast[1];value&&this._write(" ")._visitRaw(value),this._write(";")}else this._write("return ")._visitJscex({type:"return",stmt:ast})._write(";")},"for":function(ast){this._write("for (");var setup=ast[1];setup?(this._visitRaw(setup),"var"!=setup[0]?this._write("; "):this._write(" ")):this._write("; ");var condition=ast[2];condition&&this._visitRaw(condition),this._write("; ");var update=ast[3];update&&this._visitRaw(update),this._write(") ");var currInLoop=this._pos.inLoop;this._pos.inLoop=!0;var body=ast[4];this._visitRawBody(body),this._pos.inLoop=currInLoop},"for-in":function(ast){this._write("for (");var declare=ast[1];"var"==declare[0]?this._write("var "+declare[1][0][0]):this._visitRaw(declare),this._write(" in ")._visitRaw(ast[3])._write(") ");var body=ast[4];this._visitRawBody(body)},block:function(ast){this._writeLine("{"),this._indentLevel++,this._visitRawStatements(ast[1]),this._indentLevel--,this._writeIndents()._write("}")},"while":function(ast){var condition=ast[1],body=ast[2],currInLoop=this._pos.inLoop;this._pos.inLoop=!0,this._write("while (")._visitRaw(condition)._write(") ")._visitRawBody(body),this._pos.inLoop=currInLoop},"do":function(ast){var condition=ast[1],body=ast[2],currInLoop=this._pos.inLoop;this._pos.inLoop=!0,this._write("do ")._visitRawBody(body),this._pos.inLoop=currInLoop,"block"==body[0]?this._write(" "):this._writeLine()._writeIndents(),this._write("while (")._visitRaw(condition)._write(");")},"if":function(ast){var condition=ast[1],thenPart=ast[2];this._write("if (")._visitRaw(condition)._write(") ")._visitRawBody(thenPart);var elsePart=ast[3];elsePart&&("block"==thenPart[0]?this._write(" "):this._writeLine("")._writeIndents(),"if"==elsePart[0]?this._write("else ")._visitRaw(elsePart):this._write("else ")._visitRawBody(elsePart))},"break":function(ast){this._pos.inLoop||this._pos.inSwitch?this._write("break;"):this._write("return ")._visitJscex({type:"break",stmt:ast})._write(";")},"continue":function(ast){this._pos.inLoop?this._write("continue;"):this._write("return ")._visitJscex({type:"continue",stmt:ast})._write(";")},"throw":function(ast){var pos=this._pos;pos.inTry||pos.inFunction?this._write("throw ")._visitRaw(ast[1])._write(";"):this._write("return ")._visitJscex({type:"throw",stmt:ast})._write(";")},conditional:function(ast){this._write("(")._visitRaw(ast[1])._write(") ? (")._visitRaw(ast[2])._write(") : (")._visitRaw(ast[3])._write(")")},"try":function(ast){this._writeLine("try {"),this._indentLevel++;var currInTry=this._pos.inTry;this._pos.inTry=!0,this._visitRawStatements(ast[1]),this._indentLevel--,this._pos.inTry=currInTry;var catchClause=ast[2],finallyStatements=ast[3];catchClause&&(this._writeIndents()._writeLine("} catch ("+catchClause[0]+") {"),this._indentLevel++,this._visitRawStatements(catchClause[1]),this._indentLevel--),finallyStatements&&(this._writeIndents()._writeLine("} finally {"),this._indentLevel++,this._visitRawStatements(finallyStatements),this._indentLevel--),this._writeIndents()._write("}")},"switch":function(ast){this._write("switch (")._visitRaw(ast[1])._writeLine(") {"),this._indentLevel++;var currInSwitch=this._pos.inSwitch;this._pos.inSwitch=!0;for(var cases=ast[2],i=0;i<cases.length;i++){var c=cases[i];this._writeIndents(),c[0]?this._write("case ")._visitRaw(c[0])._writeLine(":"):this._writeLine("default:"),this._indentLevel++,this._visitRawStatements(c[1]),this._indentLevel--}this._indentLevel--,this._pos.inSwitch=currInSwitch,this._writeIndents()._write("}")}}},root.compile=compile,root.modules.jit=!0)},isCommonJS="undefined"!=typeof require&&"undefined"!=typeof module&&module.exports,isAmd="undefined"!=typeof define&&define.amd;if(isCommonJS)module.exports.init=function(root){root.modules.parser||require("./jscex-parser").init(root),init(root)};else if(isAmd)define("jscex-jit",["jscex-parser"],function(parser){return{init:function(root){root.modules.parser||parser.init(root),init(root)}}});else{if("undefined"==typeof Jscex)throw new Error('Missing root object, please load "jscex" module first.');if(!Jscex.modules.parser)throw new Error('Missing essential components, please initialize "parser" module first.');init(Jscex)}}();